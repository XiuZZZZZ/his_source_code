<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>nurse-vue</title>
	<% if (!htmlWebpackPlugin.options.dev) { %>
		<link rel="stylesheet" type="text/css" href="../scripts/nurse/nurse station/lib/element.css" />
		<% } %>
			<% if (htmlWebpackPlugin.options.dev) { %>
				<link rel="stylesheet" type="text/css" href="images/lib/element.css" />
				<% } %>
					<% if (htmlWebpackPlugin.options.dev) { %>
						<script language="javascript">
							var _WEBPACKTEST = true;
						</script>
						<% } %>
							<% if (!htmlWebpackPlugin.options.dev) { %>
								<script language="javascript">
									var _WEBPACKTEST = false;
								</script>
								<% } %>
</head>


<body>
	<% if (htmlWebpackPlugin.options.dev) { %>
		<script type="text/javascript" src="images/SecX_Common_BJCA.js"></script>
		<% } %>

			<% if (!htmlWebpackPlugin.options.dev) { %>
				<script language=cache RUNAT=SERVER>
					s ViewName = $G(% request.Data("ViewName", 1))
					s EpisodeID = $G(% request.Data("EpisodeID", 1))
					s ECPIP = ##class(ext.util.String).ServerIP() //Cache2010及以后
					s WebIP = ""
					s flag = ##class(web.DHCDischargeHistory).ifNewBaby(EpisodeID)
					s nurSetID = $O(^ Nur.DHCMGNurseSetD(""))
					i nurSetID'="" s WebIP = $ListGet(^Nur.DHCMGNurseSetD(nurSetID), 3)
					/*i nurSetID'="" d
					.s WebIP = $ListGet(^Nur.DHCMGNurseSetD(nurSetID), 3)
					.s printCommDllStr = WebIP_"/dhcmg/DHCCNursePrintComm.dll#DHCCNursePrintComm.WebInterface"
					.s tempCommDllStr = WebIP_"/dhcmg/Temperature.dll#Temperature.patlistTemWindow"
					.i (ViewName["Order")!(ViewName["Bed") d
					..w "<OBJECT id=""DHCCNursePrintComm""  style=""display:none"" classid="""_printCommDllStr_"""  IEWASTEXT></OBJECT>"
					.i ViewName["Temp" d
					..w "<OBJECT id=""Temperature""  style=""display:none"" classid="""_tempCommDllStr_"""  IEWASTEXT></OBJECT>"
					..s flag = 0*/
					/// EH 衢州三院 start 還原 tk
					s myCode($i(myCode)) = "<script type='text/javascript'>"
					s event =##class(% CSP.Page).Encrypt($lb("websys.Configuration.CSPServerConnect"))
					s myCode($i(myCode)) = "function tkMakeServerCall(tkclass,tkmethod) {"
					s myCode($i(myCode)) = "	if ((tkclass=='')||(tkmethod=='')) return '';"
					s myCode($i(myCode)) = "	var args=new Array('"_event_"',tkclass,tkmethod);"
					s myCode($i(myCode)) = "	for (var i=2; i<tkMakeServerCall.arguments.length; i++) {"
					s myCode($i(myCode)) = "	args[i+1]=tkMakeServerCall.arguments[i];"
					s myCode($i(myCode)) = "	}"
					s myCode($i(myCode)) = "	var retval=cspHttpServerMethod.apply(this,args);"
					s myCode($i(myCode)) = "	return retval;"
					s myCode($i(myCode)) = "}"
					s myCode($i(myCode)) = "<"_"/script>"
					f myIdx = 1: 1: myCode {
						w myCode(myIdx), !
			}
				</script>
				<script language="javascript">
					var session = new Object();
					session['LOGON.TIMEOUT'] = "#($g(%session.Data("LOGON.TIMEOUT")))#";
					session['LOGON.SITECODE'] = "#($g(%session.Data("LOGON.SITECODE")))#";
					session['LOGON.REGION'] = "#($g(%session.Data("LOGON.REGION")))#";
					session['LOGON.USERID'] = "#($g(%session.Data("LOGON.USERID")))#";
					session['LOGON.USERCODE'] = "#($g(%session.Data("LOGON.USERCODE")))#";
					session['LOGON.USERNAME'] = "#($g(%session.Data("LOGON.USERNAME")))#";
					session['LOGON.GROUPID'] = "#($g(%session.Data("LOGON.GROUPID")))#";
					session['LOGON.GROUPDESC'] = "#($g(%session.Data("LOGON.GROUPDESC")))#";
					session['LOGON.LANGID'] = "#($g(%session.Data("LOGON.LANGID")))#";
					session['LOGON.CTLOCID'] = "#($g(%session.Data("LOGON.CTLOCID")))#";
					session['XMONTHSSHORT'] = "#($g(%session.Data("XMONTHSSHORT")))#";
					session['CONTEXT'] = "#($g(%session.Data("CONTEXT",1)))#";
					session['LOGON.WARDID'] = "#($g(%session.Data("LOGON.WARDID")))#";
					session['LOGON.HOSPID'] = "#($g(%session.Data("LOGON.HOSPID")))#";
					session['ContainerName'] = "#($g(%session.Data("ContainerName")))#";
					session['LOGON.WEBIP'] = "#(WebIP)#";
				</script>
				<script language="cache" runat="SERVER">
					w "<script language=""javascript"">"
					w "  session['ViewName']="""_ViewName_""";", !
						s url = $g(% request.CgiEnvs("QUERY_STRING"))
					d ##class(Nur.Util.Tools).parseUrl(url,.parameter)
					w "", !
						s name = "" f  s name = $o(parameter(name)) q: name = ""  d
							.s value = parameter(name)
								.w "  session['"_name_"']="""_value_""";", !
									w "</"_"script>"
					w "<input id='GetCardTypeEncrypt' name='GetCardTypeEncrypt' style='display:none' type='hidden' value='"_##Class(% CSP.Page).Encrypt($lb("DHCDoc.OPDoc.PatientList.GessCardType"))_"'>", $C(13, 10)
					w "<input id='ReadAccExpEncrypt' name='InsuPatTypeCheck' style='display:none' type='hidden' value='"_##Class(% CSP.Page).Encrypt($lb("web.UDHCAccManageCLSIF.getaccinfofromcardno"))_"'>", $C(13, 10)
					w "<input id='ReadCardTypeEncrypt' name='ReadCardTypeEncrypt' style='display:none' type='hidden' value='"_##Class(% CSP.Page).Encrypt($lb("web.UDHCOPOtherLB.ReadCardTypeDefineListBroker"))_"'>", $C(13, 10)
					d ##class(web.DHCBillPrint).InvBillPrintCLSID()
					d ##class(web.UDHCCardCommLinkRegister).GetCardHardJSFunction()
					w "<input id='InvPrintEncrypt' name='InvPrintEncrypt' type='hidden' value='"_##class(% CSP.Page).Encrypt($lb("web.DHCXMLIO.ReadXML"))_"'>", $c(13, 10)
					d ##class(Nur.Util.Tools).tkMakeServerCall()
				</script>
				<script type="text/javascript" src="/csp/broker/cspxmlhttp.js"></script>
				<script type="text/javascript" src="../scripts/DHCWeb.OPCommonManageCard.js"></script>
				<script type="text/javascript" src="../scripts/DHCPrtComm.js"></script>
				<script type="text/javascript" src="../scripts/dhcbill/common/dhcbill.print.js"></script>
				<script language="javascript">
					function ReadCard() {
						var obj = document.getElementById("ReadCardTypeEncrypt");
						if (obj) { var encmeth = obj.value; }
						if (encmeth != "") {
							var myrtn = cspRunServerMethod(encmeth, "GetCardTypeToHUIJson", "", "");
							myrtn = eval('(' + myrtn + ')');
							for (var k = 0; k < myrtn.length; k++) {
								var myoptval = myrtn[k]["id"];
								var myEquipDR = myoptval.split("^")[14];
								if ((myoptval.split("^")[16] == "Handle") || (myEquipDR == "")) continue;
								var CardTypeRowId = myoptval.split("^")[0];
								var myrtn = DHCACC_GetAccInfo(CardTypeRowId, myoptval);
								var myary = myrtn.split("^");
								var rtn = myary[0];
								if ((rtn == "0") || (rtn == "-201")) {
									return myrtn;
								} else if (rtn == "-200") {
									return myrtn;
								} else if (rtn == "-1") {
									return myrtn;
								}
							}
						} else {
							return false;
						}
					}
					function TempShow(Adm) {
						var ServerIP = ""
						if ("#(WebIP)#" != "") {
							ServerIP = "#(WebIP)#";
						}
						var EpisodeID = Adm;
						var WardId = session['LOGON.WARDID'];
						var LocId = session['LOGON.CTLOCID'];
						var httpHead = ServerIP.split('://')[0];
						var ECPIP = httpHead + "://" + "#(ECPIP)#";
						if (ECPIP == "") {
							ECPIP = ServerIP;
						}
						var webservice = ECPIP + "/imedical/web/Nur.TemperatureInterface.cls";
						var FilePath = ECPIP + "/dhcmg/temperature/temperatureChart.xml";
						var flag = "#(flag)#";
						var link = ServerIP + "/dhcmg/temperature/Temperature.application?method=ShowWindow&EpisodeID=" + EpisodeID + "&WardId=" + WardId + "&LocId=" + LocId + "&webservice=" + webservice + "&FilePath=" + FilePath + "&flag=" + flag + ""
						//var link="http://127.0.0.1/dhcmg/DoctorOrderSheet/DHCCDoctorOrderSheet.application?episodeId=179&wardId=10&locId=4&userId=69&webIp=http://127.0.0.1" 
						window.location.href = link;
					}				
				</script>
				<% } %>
					<div id="app">
					</div>
					<% if (!htmlWebpackPlugin.options.dev) { %>
						<script type="text/javascript" src="../scripts/websys.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/polyfill.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/js.cookie.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/axios.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/vue.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/vuex.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/vue-router.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/lib/element-ui.min.js"></script>
						<script type="text/javascript" src="../scripts/nurse/nurse station/OrderExcute.js"></script>
						<!--script type="text/javascript"
								src="../scripts/nurse/nurse station/SecX_Common_BJCA.js"></script-->
						<% } %>

</body>

</html>